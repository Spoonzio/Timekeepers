webpackJsonp([2],{"2XjV":function(e,t){},DkS9:function(e,t){},GbDM:function(e,t){},I2C1:function(e,t){},Jvj4:function(e,t){},"LBz+":function(e,t,r){e.exports=r.p+"static/img/welcome.7a3ee22.png"},MWPo:function(e,t){},Mw84:function(e,t){},NEEs:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("7+uW"),o={name:"App",mounted:function(){JSON.parse(this.$cookie.get("user"))||this.$router.push("/")}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-row",{attrs:{justify:"center",align:"middle"}},[t("router-view")],1)},staticRenderFns:[]};var n=r("VU/8")(o,s,!1,function(e){r("slH1")},null,null).exports,i=r("zL8q"),l=r.n(i),c=(r("tvR6"),r("/ocq")),d=r("Xxa5"),u=r.n(d),p=r("mvHQ"),m=r.n(p),h=r("exGp"),f=r.n(h),g={name:"Login",data:function(){return{loading:!1,form:{username:"",password:""},rules:{username:[{required:!0,message:"Please Input Your UserName",trigger:"blur"}],password:[{required:!0,message:"Please Input Your Password",trigger:"blur"}]}}},methods:{Login:function(){var e=this;return f()(u.a.mark(function t(){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.$axios({url:e.$constants.loginUrl,method:"post",data:e.form});case 4:if(r=t.sent,e.loading=!1,0==r.data.code){t.next=9;break}return e.$message.error(r.data.message),t.abrupt("return");case 9:e.$cookie.set("user",m()(r.data.data),{expires:"30d"}),e.$router.push({name:"DashBoard"}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),e.loading=!1,console.log(t.t0);case 17:case"end":return t.stop()}},t,e,[[0,13]])}))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.Login()})}},mounted:function(){this.$cookie.get("user")&&this.$router.push({name:"DashBoard"})}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"form container"},[r("el-col",{attrs:{span:8,offset:8}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[r("h2",[e._v("Time Keeper")])]),e._v(" "),r("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:e.form,rules:e.rules,"hide-required-asterisk":!0}},[r("el-form-item",{attrs:{label:"Username",prop:"username"}},[r("el-input",{attrs:{placeholder:"Please Input Your UserName"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Password",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"Please Input Your Password","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),r("el-row",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Sign In")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var b=r("VU/8")(g,v,!1,function(e){r("DkS9")},"data-v-0cdc4ca6",null).exports,k={name:"DashBoard",data:function(){return{active:"1",user:{},isSupervisor:!1,isApprover:!1,isPM:!1,isRE:!1}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},handleLogout:function(){this.$cookie.delete("user"),this.$router.push({name:"Login"})}},mounted:function(){var e=this.$cookie.get("user");if(console.log(JSON.parse(e)),!e)return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.user=JSON.parse(e),this.isSupervisor=this.user.roles.includes("Supervisor"),this.isApprover=this.user.roles.includes("Timesheet Approver"),this.isPM=this.user.roles.includes("Project Manager"),this.isRE=this.user.roles.includes("Responsible Engineer")}},w={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-aside",{attrs:{width:"260px"}},[r("el-header",{staticClass:"logo"},[e._v("Time Keeper")]),e._v(" "),r("el-menu",{staticClass:"aside",attrs:{"default-active":"1","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},[r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/dashboard/welcome"}},[r("el-menu-item",{attrs:{index:"1"}},[r("i",{staticClass:"el-icon-s-home"}),e._v(" "),r("span",[e._v("Welcome")])])],1),e._v(" "),r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/dashboard/project"}},[r("el-menu-item",{attrs:{index:"2"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-order"}),e._v(" "),r("span",[e._v("Project Management")])])],2)],1),e._v(" "),"Administrator"==e.user.role||"Human Resource"==e.user.role||e.isSupervisor?r("el-submenu",{attrs:{index:"3"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-custom"}),e._v(" "),r("span",[e._v("Employee Management")])]),e._v(" "),r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/dashboard/employeeList"}},[r("el-menu-item",{attrs:{index:"3-1"}},[e._v("Employees")])],1),e._v(" "),"Administrator"==e.user.role||"Human Resource"==e.user.role?r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/dashboard/editPayRate"}},[r("el-menu-item",{attrs:{index:"3-2"}},[e._v("Pay Rates")])],1):e._e()],2):e._e(),e._v(" "),r("el-submenu",{attrs:{index:"4"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-s-claim"}),e._v(" "),r("span",[e._v("Timesheet Management")])]),e._v(" "),r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/dashboard/mytimesheet"}},[r("el-menu-item",{attrs:{index:"4-2"}},[e._v("My Timesheets")])],1),e._v(" "),e.isApprover?r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/dashboard/timesheetapprove"}},[r("el-menu-item",{attrs:{index:"4-1"}},[e._v("Approve Timesheets")])],1):e._e()],2),e._v(" "),"Administrator"==e.user.role||e.isPM||e.isRE?r("el-submenu",{attrs:{index:"6"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-document"}),e._v(" "),r("span",[e._v("Report Management")])]),e._v(" "),"Administrator"==e.user.role||e.isPM?r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/dashboard/reports/all"}},[r("el-menu-item",{attrs:{index:"6-1"}},[e._v("All Report List")])],1):e._e(),e._v(" "),"Administrator"==e.user.role||e.isRE?r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/dashboard/reports/MonthlyList"}},[r("el-menu-item",{attrs:{index:"6-2"}},[e._v("Monthly Report List")])],1):e._e()],2):e._e(),e._v(" "),r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/dashboard/changepw"}},[r("el-menu-item",{attrs:{index:"5"}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-key"}),e._v(" "),r("span",[e._v("Change Password")])])],2)],1),e._v(" "),r("el-menu-item",{attrs:{index:"99"},on:{click:e.handleLogout}},[r("i",{staticClass:"el-icon-magic-stick"}),e._v(" "),r("span",[e._v("Logout")])])],1)],1),e._v(" "),r("el-main",{staticClass:"main"},[r("router-view")],1)],1)},staticRenderFns:[]};var _=r("VU/8")(k,w,!1,function(e){r("lPeV")},"data-v-37d60b98",null).exports,y={name:"Login",data:function(){return{loading:!0,currentPage:1,employees:[],total:0,page:0,size:20,user:null,showAll:!1}},methods:{loadData:function(){var e=this;return f()(u.a.mark(function t(){var r,a,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=JSON.parse(e.$cookie.get("user")).token)||(e.$message.error("Token expired"),e.$router.push("/")),a={page:e.page,size:e.size},e.user.roles.includes("Administrator")||e.user.roles.includes("Human Resource")?e.showAll=!0:(e.showAll=!1,a.supervisorId=e.user.employeeId),t.prev=5,t.next=8,e.$axios({method:"GET",url:e.$constants.usersUrl,headers:{token:r},params:a});case 8:if(o=t.sent,e.loading=!1,0==o.data.code){t.next=13;break}return e.$message.error(o.data.message),t.abrupt("return");case 13:e.employees=o.data.data.list,e.total=o.data.data.total,console.log(e.employees),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(5),e.$message.error(t.t0),console.log(t.t0);case 22:case"end":return t.stop()}},t,e,[[5,18]])}))()},handleSizeChange:function(e){this.size=e,this.loadData()},handleCurrentChange:function(e){this.page=e-1,this.loadData()}},mounted:function(){var e=this.$cookie.get("user");if(!e)return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.user=JSON.parse(e),this.loadData()}},x={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-breadcrumb",{staticStyle:{"margin-bottom":"5px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/employeeList"}}},[e._v("Employee Management")]),e._v(" "),r("el-breadcrumb-item",[e._v("Employees")])],1),e._v(" "),e.showAll?r("el-row",{staticStyle:{"margin-bottom":"5px","text-align":"right"}},[r("router-link",{attrs:{to:"editEmployee/0"}},[r("el-button",{attrs:{type:"primary"}},[e._v("New Employee")])],1)],1):e._e(),e._v(" "),r("el-row",{style:e.showAll?"":"margin-top: 40px;"},[r("el-table",{attrs:{data:e.employees,border:""}},[r("el-table-column",{attrs:{prop:"employeeId",label:"ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"lastName",label:"Last Name"}}),e._v(" "),r("el-table-column",{attrs:{prop:"firstName",label:"First Name"}}),e._v(" "),r("el-table-column",{attrs:{prop:"role",label:"Title"}}),e._v(" "),r("el-table-column",{attrs:{prop:"supervisor.firstName",label:"Supervisor"}}),e._v(" "),r("el-table-column",{attrs:{prop:"approver.firstName",label:"Approver"}}),e._v(" "),e.showAll?r("el-table-column",{attrs:{prop:"paygradeEntity.grade",label:"Pay Level"}}):e._e(),e._v(" "),e.showAll?r("el-table-column",{attrs:{prop:"paygradeEntity.rate",label:"Pay Rate"}}):e._e(),e._v(" "),r("el-table-column",{attrs:{fixed:"right",width:"80",label:"Action"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{staticStyle:{"text-decoration":"none",color:"blue"},attrs:{to:{name:"EditEmployee",params:{id:t.row.employeeId}}}},[r("el-button",{attrs:{type:"text",size:"small"}},[e._v("Edit")])],1)]}}])})],1),e._v(" "),r("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"center"},attrs:{"current-page":e.currentPage,"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var P=r("VU/8")(y,x,!1,function(e){r("QLx0")},"data-v-52838610",null).exports,$={name:"Login",data:function(){return{currentEmployeeId:1,user:null,showAll:!1,passwordPlaceholder:"Please Input The Password",form:{employeeId:null,userName:"",password:null,lastName:"",firstName:"",paygrade:null,supervisor:null,role:null,approver:null,disabled:!1},loading:!1,roleOptions:[],employees:[],payGradeOptions:[],token:"",rules:{employeeId:[{required:!0,message:"Employee ID is required",trigger:"blur"}],userName:[{required:!0,message:"Username is required",trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"}],lastName:[{required:!0,message:"Last name is required",trigger:"blur"}],firstName:[{required:!0,message:"First name is required",trigger:"blur"}],paygrade:[{required:!0,message:"Pay Level is required",trigger:"blur"}],role:[{required:!0,message:"Role is required",trigger:"blur"}],approver:[{required:!0,message:"Timesheet Approver is required",trigger:"blur"}]}}},methods:{employeesLabel:function(e){return e.firstName+" "+e.lastName},getEmployeeIdFromUrl:function(){this.currentEmployeeId=this.$route.params.id},getCurrentEmployee:function(){var e=f()(u.a.mark(function e(){var t,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios({method:"GET",url:this.$constants.usersUrl+"/"+this.currentEmployeeId,headers:{token:this.token}});case 4:if(t=e.sent,this.loading=!1,0==t.data.code){e.next=9;break}return this.$message.error(t.data.message),e.abrupt("return");case 9:r=t.data.data,this.form.employeeId=r.employeeId,this.form.firstName=r.firstName,this.form.lastName=r.lastName,this.form.userName=r.credentialEntity.userName,this.form.role=r.role,this.form.supervisor=r.supervisor?r.supervisor.employeeId:null,this.form.paygrade=r.paygradeEntity.grade,this.form.approver=r.approver?r.approver.employeeId:null,this.form.disabled=r.disabled,e.next=26;break;case 21:e.prev=21,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 26:case"end":return e.stop()}},e,this,[[0,21]])}));return function(){return e.apply(this,arguments)}}(),getEmployees:function(){var e=f()(u.a.mark(function e(){var t,r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios({method:"GET",url:this.$constants.usersUrl,headers:{token:this.token}});case 4:if(t=e.sent,this.loading=!1,0==t.data.code){e.next=9;break}return this.$message.error(t.data.message),e.abrupt("return");case 9:this.employees=t.data.data.list.filter(function(e){return e.employeeId!=r.currentEmployeeId}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 17:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),getPayGrade:function(){var e=f()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios({method:"GET",url:this.$constants.payRateUrl,headers:{token:this.token}});case 4:if(t=e.sent,this.loading=!1,0==t.data.code){e.next=9;break}return this.$message.error(t.data.message),e.abrupt("return");case 9:this.payGradeOptions=t.data.data,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 17:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),getRoles:function(){var e=f()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios({method:"GET",url:this.$constants.usersUrl+"/role",headers:{token:this.token}});case 4:if(t=e.sent,this.loading=!1,0==t.data.code){e.next=9;break}return this.$message.error(t.data.message),e.abrupt("return");case 9:this.roleOptions=t.data.data,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 17:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),handleSave:function(){var e=f()(u.a.mark(function e(){var t,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,t=this.$constants.usersUrl,0!=this.currentEmployeeId&&(t+="/"+this.currentEmployeeId),(!this.form.password||" "==this.form.password||this.form.password.length<1)&&(this.form.password=null),e.next=7,this.$axios({method:0==this.currentEmployeeId?"POST":"PUT",url:t,headers:{token:this.token},data:this.form});case 7:if(r=e.sent,this.loading=!1,0==r.data.code){e.next=12;break}return this.$message.error(r.data.message),e.abrupt("return");case 12:this.$router.push({path:"/dashboard/employeeList"}),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 20:case"end":return e.stop()}},e,this,[[0,15]])}));return function(){return e.apply(this,arguments)}}(),submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.handleSave()})}},mounted:function(){if(!this.$cookie.get("user"))return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.user=JSON.parse(this.$cookie.get("user")),this.token=this.user.token,this.user.roles.includes("Administrator")||this.user.roles.includes("Human Resource")?this.showAll=!0:this.showAll=!1,this.getEmployeeIdFromUrl(),0!=this.currentEmployeeId&&(this.passwordPlaceholder="Please input the new password if needed",this.rules.password=[{required:!1}],this.getCurrentEmployee()),this.getEmployees(),this.showAll&&(this.getPayGrade(),this.getRoles())}},I={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-breadcrumb",{staticStyle:{"margin-bottom":"20px"},attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/employeeList"}}},[e._v("Employee")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/employeeList"}}},[e._v("List")]),e._v(" "),r("el-breadcrumb-item",[e._v("Employee Detail")])],1),e._v(" "),r("el-form",{ref:"ruleForm",attrs:{"label-width":"10vw",model:e.form,rules:e.rules,"hide-required-asterisk":!0}},[r("el-form-item",{attrs:{label:"ID",prop:"employeeId"}},[r("el-input",{attrs:{placeholder:"Please Input the Employee ID",disabled:!e.showAll},model:{value:e.form.employeeId,callback:function(t){e.$set(e.form,"employeeId",t)},expression:"form.employeeId"}})],1),e._v(" "),e.showAll?r("el-form-item",{attrs:{label:"Username",prop:"userName"}},[r("el-input",{attrs:{placeholder:"Please Input the UserName"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1):e._e(),e._v(" "),e.showAll?r("el-form-item",{attrs:{label:"Password",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:e.passwordPlaceholder,"show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"Last Name",prop:"lastName"}},[r("el-input",{attrs:{placeholder:"Please Input the Last Name",disabled:!e.showAll},model:{value:e.form.lastName,callback:function(t){e.$set(e.form,"lastName",t)},expression:"form.lastName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"First Name",prop:"firstName"}},[r("el-input",{attrs:{placeholder:"Please Input the First Name",disabled:!e.showAll},model:{value:e.form.firstName,callback:function(t){e.$set(e.form,"firstName",t)},expression:"form.firstName"}})],1),e._v(" "),e.showAll?r("el-form-item",{attrs:{label:"Role",prop:"role"}},[r("el-select",{attrs:{filterable:"",placeholder:"Please Choose the Role"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},e._l(e.roleOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1):e._e(),e._v(" "),e.showAll?r("el-form-item",{attrs:{label:"Pay Rate",prop:"paygrade"}},[r("el-select",{attrs:{filterable:"",placeholder:"Please Choose the Pay Rate"},model:{value:e.form.paygrade,callback:function(t){e.$set(e.form,"paygrade",t)},expression:"form.paygrade"}},e._l(e.payGradeOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.grade,value:e.grade}})}),1)],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"Supervisor",prop:"supervisor"}},[r("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Please Choose the Supervisor",disabled:!e.showAll},model:{value:e.form.supervisor,callback:function(t){e.$set(e.form,"supervisor",t)},expression:"form.supervisor"}},e._l(e.employees,function(t){return r("el-option",{key:t.employeeId,attrs:{label:e.employeesLabel(t),value:t.employeeId}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Approver",prop:"approver"}},[r("el-select",{attrs:{filterable:"",placeholder:"Please Choose the timesheet approver"},model:{value:e.form.approver,callback:function(t){e.$set(e.form,"approver",t)},expression:"form.approver"}},e._l(e.employees,function(t){return r("el-option",{key:t.employeeId,attrs:{label:e.employeesLabel(t),value:t.employeeId}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Disabled",prop:"disabled"}},[r("el-switch",{attrs:{"active-value":!0,"inactive-value":!1,disabled:!e.showAll},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}})],1),e._v(" "),r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("\n      Save\n    ")])],1)],1)},staticRenderFns:[]};var S=r("VU/8")($,I,!1,function(e){r("NEEs")},"data-v-a7b9401a",null).exports,j={name:"Login",data:function(){return{loading:!0,tableData:[],year:new Date}},methods:{initList:function(){var e=f()(u.a.mark(function e(){var t,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,t=JSON.parse(this.$cookie.get("user")).token,e.prev=2,e.next=5,this.$axios({method:"GET",url:this.$constants.payRateUrl+"?year="+this.year.getFullYear(),headers:{token:t}});case 5:if(r=e.sent,this.loading=!1,0==r.data.code){e.next=10;break}return this.$message.error(r.data.message),e.abrupt("return");case 10:this.tableData=r.data.data,e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),this.$message.error(e.t0),this.loading=!1,console.log(e.t0);case 18:case"end":return e.stop()}},e,this,[[2,13]])}));return function(){return e.apply(this,arguments)}}()},watch:{year:function(e,t){this.initList()}},mounted:function(){if(!this.$cookie.get("user"))return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.initList()}},T={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-row",[r("el-breadcrumb",{staticStyle:{"margin-bottom":"5px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/employeeList"}}},[e._v("Employee Management")]),e._v(" "),r("el-breadcrumb-item",[e._v("Pay Rates")])],1)],1),e._v(" "),r("el-row",{staticStyle:{"text-align":"right"}},[r("el-date-picker",{attrs:{type:"year",placeholder:"Choose a Year"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1),e._v(" "),r("el-row",[r("el-col",[r("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"grade",label:"Pay Level"}}),e._v(" "),r("el-table-column",{attrs:{prop:"rate",label:"Pay Rate"}})],1)],1)],1)],1)},staticRenderFns:[]};var R=r("VU/8")(j,T,!1,function(e){r("GbDM")},"data-v-6fa3394c",null).exports,C={name:"Login",data:function(){return{loading:!0,currentPage:1,timesheets:[],total:0,page:0,size:20,user:null}},methods:{loadData:function(){var e=this;return f()(u.a.mark(function t(){var r,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=JSON.parse(e.$cookie.get("user")).token)||(e.$message.error("Token expired"),e.$router.push("/")),t.prev=2,t.next=5,e.$axios({method:"GET",url:e.$constants.timesheetUrl+"?employeeId="+e.user.employeeId,headers:{token:r},params:{page:e.page,size:e.size}});case 5:if(a=t.sent,e.loading=!1,0==a.data.code){t.next=10;break}return e.$message.error(a.data.message),t.abrupt("return");case 10:e.timesheets=a.data.data,e.total=a.data.data.total,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),e.$message.error(t.t0),console.log(t.t0);case 18:case"end":return t.stop()}},t,e,[[2,14]])}))()},handleSizeChange:function(e){this.size=e,this.loadData()},handleCurrentChange:function(e){this.page=e-1,this.loadData()},checkTimesheetSubmit:function(e){return"submitted"!=e&&"approved"!=e}},mounted:function(){var e=this.$cookie.get("user");if(!e)return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.user=JSON.parse(e),this.loadData()}},D={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-breadcrumb",{staticStyle:{"margin-bottom":"5px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/mytimesheet"}}},[e._v("My Timesheet")])],1),e._v(" "),r("el-row",{staticStyle:{"margin-bottom":"5px","text-align":"right"}},[r("router-link",{attrs:{to:"addTimesheet/0"}},[r("el-button",{attrs:{type:"primary"}},[e._v("Add Timesheet")])],1)],1),e._v(" "),r("el-row",{staticStyle:{"margin-top":"20px"}},[r("el-table",{attrs:{data:e.timesheets,border:""}},[r("el-table-column",{attrs:{prop:"weekEnding",label:"Date"}}),e._v(" "),r("el-table-column",{attrs:{prop:"totalHours",label:"Total"}}),e._v(" "),r("el-table-column",{attrs:{prop:"isApproved",label:"Status"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",width:"80",label:"Action"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.checkTimesheetSubmit(t.row.isApproved)?r("router-link",{staticStyle:{"text-decoration":"none",color:"blue"},attrs:{to:{name:"AddTimesheet",params:{id:t.row.employeeId},query:{endDate:t.row.weekEnding}}}},[r("el-button",{attrs:{type:"text",size:"small"}},[e._v("Edit")])],1):r("router-link",{staticStyle:{"text-decoration":"none",color:"blue"},attrs:{to:{name:"ViewTimesheet",params:{employeeId:t.row.employeeId,endDate:t.row.weekEnding}}}},[r("el-button",{attrs:{type:"text",size:"small"}},[e._v("View")])],1)]}}])})],1),e._v(" "),r("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"center"},attrs:{"current-page":e.currentPage,"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var F=r("VU/8")(C,D,!1,function(e){r("XkLY")},"data-v-39a940b2",null).exports,E={name:"Login",data:function(){return{loading:!0,currentPage:1,timesheets:[],total:0,page:0,size:20}},methods:{loadData:function(){var e=this;return f()(u.a.mark(function t(){var r,a,o,s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.parse(e.$cookie.get("user")),a=r.token,console.log(r),o=r.employeeId,t.prev=4,t.next=7,e.$axios({method:"GET",url:e.$constants.timesheetUrl+"?approverId="+o,headers:{token:a},params:{page:e.page,size:e.size}});case 7:if(0==(s=t.sent).data.code){t.next=11;break}return e.$message.error(s.data.message),t.abrupt("return");case 11:e.timesheets=s.data.data,e.total=e.timesheets.length,console.log(e.timesheets),e.loading=!1,t.next=21;break;case 17:t.prev=17,t.t0=t.catch(4),e.$message.error(t.t0),console.log(t.t0);case 21:case"end":return t.stop()}},t,e,[[4,17]])}))()},handleSizeChange:function(e){this.size=e,this.loadData()},handleCurrentChange:function(e){this.page=e-1,this.loadData()}},mounted:function(){if(!this.$cookie.get("user"))return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.loadData()}},N={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-breadcrumb",{staticStyle:{"margin-bottom":"5px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/mytimesheet"}}},[e._v("Timesheet")]),e._v(" "),r("el-breadcrumb-item",[e._v("Timesheet Approve")])],1),e._v(" "),r("el-row",{staticStyle:{"margin-top":"20px"}},[r("el-table",{attrs:{data:e.timesheets,border:""}},[r("el-table-column",{attrs:{prop:"employeeId",label:"Employee ID",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"employeeFullName",label:"Employee Name"}}),e._v(" "),r("el-table-column",{attrs:{prop:"totalHours",label:"Total"}}),e._v(" "),r("el-table-column",{attrs:{prop:"weekEnding",label:"Date"}}),e._v(" "),r("el-table-column",{attrs:{prop:"isApproved",label:"Status"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",width:"80",label:"Action"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{staticStyle:{"text-decoration":"none",color:"blue"},attrs:{to:{name:"ViewTimesheet",params:{employeeId:t.row.employeeId,endDate:t.row.weekEnding},query:{approverView:1}}}},[r("el-button",{attrs:{type:"text",size:"small"}},[e._v("View")])],1)]}}])})],1),e._v(" "),r("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"center"},attrs:{"current-page":e.currentPage,"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]};var A=r("VU/8")(E,N,!1,function(e){r("iR9F")},"data-v-a43dd62e",null).exports,W=r("Dd8w"),L=r.n(W),M={name:"Login",data:function(){return{user:null,token:null,loading:!0,showTable:!0,rows:[],form:{isApproved:"submitted",flexTime:0,overTime:0},rowForm:{projectId:"",workPackageId:"",mon:0,tue:0,wed:0,thu:0,fri:0,sat:0,sun:0},currentWPs:[],dialogVisible:!1,week:(new Date).toISOString().slice(0,10),rootProjects:[],rawProjects:{},previousProjectId:null,previousWPId:null,pickerOptions:{firstDayOfWeek:1},rules:{projectId:[{required:!0,message:"Project Name is required",trigger:"blur"}],workPackageId:[{required:!0,message:"Work package is required",trigger:"blur"}],flexTime:[{required:!0,message:"flex time is required",trigger:"blur"}],overTime:[{required:!0,message:"Over time is required",trigger:"blur"}],markupCost:[{required:!0,message:"Markup cost is required",trigger:"blur"}]}}},methods:{loadData:function(){var e=this;return f()(u.a.mark(function t(){var r,a,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,e.rows=[],(r=e.$route.params.endDate)&&(e.week=r),t.next=7,e.$axios({method:"GET",url:e.$constants.timesheetUrl+"?employeeId="+e.user.employeeId+"&startDate="+e.week,headers:{token:e.token}});case 7:if(a=t.sent,e.loading=!1,0==a.data.code){t.next=12;break}return e.$message.error(a.data.message),t.abrupt("return");case 12:o=a.data.data,console.log(o),o.length>0&&(e.form.isApproved=o[0].isApproved,e.form.flexTime=o[0].flexTimeUsed,e.form.overTime=o[0].overtime,"submitted"==e.form.isApproved||"approved"==e.form.isApproved?e.showTable=!1:e.showTable=!0),o.length>0&&o[0].timesheetrows.length>0&&(e.rows=o[0].timesheetrows.map(function(e){return L()({},e,{edit:!1})})),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(0),e.$message.error(t.t0),console.log(t.t0),e.loading=!1;case 23:case"end":return t.stop()}},t,e,[[0,18]])}))()},onDateChange:function(){this.loadData()},editOnRow:function(e){this.bAdd=!1,this.rowForm=e,this.dialogVisible=!0},addRow:function(){this.bAdd=!0,this.dialogVisible=!0},deleteRow:function(){var e=f()(u.a.mark(function e(t){var r,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,r={projectId:this.rows[t].projectId,workPackageId:this.rows[t].workPackageId,employeeId:this.user.employeeId,weekEnding:this.week},console.log(r),e.next=6,this.$axios({method:"DELETE",url:this.$constants.timesheetUrl+"/row",headers:{token:this.token},data:r});case 6:if(a=e.sent,this.loading=!1,0==a.data.code){e.next=11;break}return this.$message.error(a.data.message),e.abrupt("return");case 11:this.rows=this.rows.filter(function(e,r){return r!=t}),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 19:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t){return e.apply(this,arguments)}}(),handleSubmit:function(){var e=f()(u.a.mark(function e(){var t,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.loading=!0,t=40,!(this.getSummary()-this.form.flexTime-this.form.overTime<t)){e.next=6;break}return this.$message.error("Total hours must be at least 40 hours"),e.abrupt("return");case 6:return this.form.isApproved="submitted",e.next=9,this.$axios({method:"PUT",url:this.$constants.timesheetUrl+"/"+this.user.employeeId+"/"+this.week,headers:{token:this.token},data:this.form});case 9:if(r=e.sent,this.loading=!1,0==r.data.code){e.next=14;break}return this.$message.error(r.data.message),e.abrupt("return");case 14:this.$router.push({path:"/dashboard/mytimesheet"}),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 22:case"end":return e.stop()}},e,this,[[0,17]])}));return function(){return e.apply(this,arguments)}}(),submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.handleSubmit()})},getSummary:function(){var e=0;return this.rows.forEach(function(t){e+=t.mon+t.tue+t.wed+t.thu+t.fri+t.sat+t.sun}),e},getAllProjects:function(){var e=f()(u.a.mark(function e(){var t,r,a=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=function e(t,r){t.workPackageArray||(t.workPackageArray=[]),r.forEach(function(r){t.workPackageArray.push(r.workPackageId),r.childWorkPackages.length&&e(t,r.childWorkPackages)})},this.loading=!0,e.next=5,this.$axios({method:"GET",url:"api/projectpackage",headers:{token:this.token}});case 5:if(r=e.sent,this.loading=!1,0==r.data.code){e.next=10;break}return this.$message.error(r.data.message),e.abrupt("return");case 10:r.data.data.forEach(function(e){a.rootProjects.push(e.projectId),e.childWorkPackages.length&&t(e,e.childWorkPackages)}),this.rawProjects=r.data.data,console.log(r.data.data),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 20:case"end":return e.stop()}},e,this,[[0,15]])}));return function(){return e.apply(this,arguments)}}(),onProjectChange:function(e){for(var t=0;t<this.rawProjects.length;++t)e==this.rawProjects[t].projectId&&(this.currentWPs=this.rawProjects[t].workPackageArray)},onAddNewRow:function(){var e=this;return f()(u.a.mark(function t(){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.loading=!0,e.dialogVisible=!1,e.rowForm.weekEnding=e.week,r=null,!e.bAdd){t.next=11;break}return t.next=8,e.$axios({method:"POST",url:"api/timesheet/row",headers:{token:e.token},data:e.rowForm});case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,e.$axios({method:"PUT",url:"api/timesheet/row/"+e.user.employeeId+"/"+e.week+"/"+e.rowForm.projectId+"/"+e.rowForm.workPackageId,headers:{token:e.token},data:e.rowForm});case 13:r=t.sent;case 14:if(e.loading=!1,0==r.data.code){t.next=18;break}return e.$message.error(r.data.message),t.abrupt("return");case 18:e.dialogVisible=!1,e.loadData(),t.next=27;break;case 22:t.prev=22,t.t0=t.catch(0),e.$message.error(t.t0),console.log(t.t0),e.loading=!1;case 27:case"end":return t.stop()}},t,e,[[0,22]])}))()}},mounted:function(){var e=this;return f()(u.a.mark(function t(){var r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.$cookie.get("user")){t.next=5;break}return e.$message.error("Token expired"),e.$router.push({name:"Login"}),t.abrupt("return");case 5:return e.user=JSON.parse(r),e.token=e.user.token,t.next=9,e.getAllProjects();case 9:e.loadData();case 10:case"end":return t.stop()}},t,e)}))()}},O={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-breadcrumb",{staticStyle:{"margin-bottom":"20px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/mytimesheet"}}},[e._v("Timesheet")]),e._v(" "),r("el-breadcrumb-item",[e._v("Add or Edit Timesheet")])],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:18}},[r("el-date-picker",{attrs:{disabled:"",type:"week","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd",placeholder:"Choose a Year",change:function(){e.onDateChange()}},model:{value:e.week,callback:function(t){e.week=t},expression:"week"}})],1),e._v(" "),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRow()}}},[e._v("New Row")])],1)],1),e._v(" "),e.showTable?r("el-row",{staticStyle:{"margin-top":"15px"}},[r("el-form",{ref:"ruleForm",attrs:{inline:!0,model:e.form,rules:e.rules,"hide-required-asterisk":!0}},[r("el-table",{attrs:{data:e.rows,border:""}},[r("el-table-column",{attrs:{prop:"projectId",label:"Project"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.projectId)+"\n          ")]}}],null,!1,1236625989)}),e._v(" "),r("el-table-column",{attrs:{prop:"workPackageId",label:"WP"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.workPackageId)+"\n          ")]}}],null,!1,899162667)}),e._v(" "),r("el-table-column",{attrs:{prop:"mon",label:"Mon"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.mon)+"\n          ")]}}],null,!1,67779921)}),e._v(" "),r("el-table-column",{attrs:{prop:"tue",label:"Tue"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.tue)+"\n          ")]}}],null,!1,2169647321)}),e._v(" "),r("el-table-column",{attrs:{prop:"wed",label:"Wed"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.wed)+"\n          ")]}}],null,!1,3102911819)}),e._v(" "),r("el-table-column",{attrs:{prop:"thu",label:"Thu"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.thu))]}}],null,!1,2327555935)}),e._v(" "),r("el-table-column",{attrs:{prop:"fri",label:"Fri"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.fri))]}}],null,!1,1460703499)}),e._v(" "),r("el-table-column",{attrs:{prop:"sat",label:"Sat"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.sat))]}}],null,!1,60839472)}),e._v(" "),r("el-table-column",{attrs:{prop:"sun",label:"Sun"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.sun))]}}],null,!1,1239815870)}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",width:"115",label:"Action"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.editOnRow(t.row)}}},[e._v("Edit")]),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.deleteRow(t.$index)}}},[e._v("Delete")])]}}],null,!1,2360577153)})],1),e._v(" "),r("el-row",{staticStyle:{"margin-top":"15px"}},[r("el-form-item",{attrs:{label:"Over Time:",prop:"overTime",size:"small"}},[r("el-input",{model:{value:e.form.overTime,callback:function(t){e.$set(e.form,"overTime",t)},expression:"form.overTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Flex Time:",prop:"flexTime",size:"small"}},[r("el-input",{model:{value:e.form.flexTime,callback:function(t){e.$set(e.form,"flexTime",t)},expression:"form.flexTime"}})],1)],1),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("\n        Submit\n      ")])],1)],1):r("el-row",{staticStyle:{"margin-top":"15px"}},[e._v("\n    The timesheet of this week is already existed and is forbidden to edit.\n    Please choose another date.\n  ")]),e._v(" "),r("el-dialog",{attrs:{title:"Add/Edit Timesheet Row",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-row",{staticStyle:{"max-height":"300px",overflow:"auto",padding:"10px"}},[r("el-form",{attrs:{model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"Project"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select a project",change:e.onProjectChange(e.rowForm.projectId),disabled:!e.bAdd},model:{value:e.rowForm.projectId,callback:function(t){e.$set(e.rowForm,"projectId",t)},expression:"rowForm.projectId"}},e._l(e.rootProjects,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"WP"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.bAdd,placeholder:"Please select a work package"},model:{value:e.rowForm.workPackageId,callback:function(t){e.$set(e.rowForm,"workPackageId",t)},expression:"rowForm.workPackageId"}},e._l(e.currentWPs,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Monday"}},[r("el-input-number",{attrs:{precision:1,step:.1,max:10},model:{value:e.rowForm.mon,callback:function(t){e.$set(e.rowForm,"mon",t)},expression:"rowForm.mon"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Tuesday"}},[r("el-input-number",{attrs:{precision:1,step:.1,max:10},model:{value:e.rowForm.tue,callback:function(t){e.$set(e.rowForm,"tue",t)},expression:"rowForm.tue"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Wednesday"}},[r("el-input-number",{attrs:{precision:1,step:.1,max:10},model:{value:e.rowForm.wed,callback:function(t){e.$set(e.rowForm,"wed",t)},expression:"rowForm.wed"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Thursday"}},[r("el-input-number",{attrs:{precision:1,step:.1,max:10},model:{value:e.rowForm.thu,callback:function(t){e.$set(e.rowForm,"thu",t)},expression:"rowForm.thu"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Friday"}},[r("el-input-number",{attrs:{precision:1,step:.1,max:10},model:{value:e.rowForm.fri,callback:function(t){e.$set(e.rowForm,"fri",t)},expression:"rowForm.fri"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Saturday"}},[r("el-input-number",{attrs:{precision:1,step:.1,max:10},model:{value:e.rowForm.sat,callback:function(t){e.$set(e.rowForm,"sat",t)},expression:"rowForm.sat"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Sunday"}},[r("el-input-number",{attrs:{precision:1,step:.1,max:10},model:{value:e.rowForm.sun,callback:function(t){e.$set(e.rowForm,"sun",t)},expression:"rowForm.sun"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancle")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onAddNewRow()}}},[e._v("OK")])],1)],1)],1)},staticRenderFns:[]};var U=r("VU/8")(M,O,!1,function(e){r("MWPo")},"data-v-9677db36",null).exports,V=r("LBz+"),z=r.n(V),q={name:"Login",data:function(){return{images:{welcome:z.a}}},methods:{handleLogin:function(){}},mounted:function(){if(!this.$cookie.get("user"))return this.$message.error("Token expired"),void this.$router.push({name:"Login"})}},G={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",[r("el-breadcrumb",{staticStyle:{"margin-bottom":"5px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/welcome"}}},[e._v("Welcome")]),e._v(" "),r("el-breadcrumb-item",[e._v("Index")])],1),e._v(" "),r("el-row",{staticStyle:{"margin-top":"10vh"}},[r("center",[r("img",{attrs:{src:e.images.welcome,width:"300"}})])],1),e._v(" "),r("center",[r("h2",{staticStyle:{color:"#c0c0c0"}},[e._v("\n      Welcome to Time Keeper"),r("br"),e._v("Project Management System\n    ")])])],1)},staticRenderFns:[]};var H=r("VU/8")(q,G,!1,function(e){r("Jvj4")},"data-v-76e1f909",null).exports,J={name:"Login",data:function(){return{currentWorkPackageId:null,payRates:[],form:{projectId:null,workPackageId:null,managerId:null,isOpen:!0,employees:[],parentWorkPackageId:null,assistantId:null,personDays:{}},loading:!1,statusOptions:[{label:"In progress",value:!0},{label:"Closed",value:!1}],employees:[],isWorkPackage:!1,isNewProject:!0,isCreateForm:!0,token:"",projectManagerLabel:"Project Manager",rules:{projectId:[{required:!0,message:"Project Name is required",trigger:"blur"}],workPackageId:[{required:!0,message:"Work package is required",trigger:"blur"}],managerId:[{required:!0,message:"Manager is required",trigger:"blur"}],isOpen:[{required:!0,message:"Status is required",trigger:"blur"}]}}},methods:{employeesLabel:function(e){return e.firstName+" "+e.lastName},getProjectIdFromUrl:function(){var e=this.$route.query.createWP;this.currentProjectId=this.$route.params.id,this.currentWorkPackageId=this.$route.query.workPackageId,1==e?(this.form.projectId=this.$route.params.id,this.form.parentWorkPackageId=this.$route.query.workPackageId,this.isNewProject=!1,this.isWorkPackage=!0,this.projectManagerLabel="Responsible Engineer",this.isCreateForm=!0):0!=this.currentProjectId&&(this.isNewProject=!1,this.isCreateForm=!1)},getCurrentProject:function(){var e=f()(u.a.mark(function e(){var t,r,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios({method:"GET",url:this.$constants.projectUrl+"/"+this.currentProjectId+"/"+this.currentWorkPackageId,headers:{token:this.token}});case 4:for(r in(t=e.sent).data.data.personDays)for(a=0;a<this.payRates.length;a++)r==this.payRates[a].name&&(this.payRates[a].val=t.data.data.personDays[r]);if(0==t.data.code){e.next=9;break}return this.$message.error(t.data.message),e.abrupt("return");case 9:o=t.data.data,this.form=o,this.form.isOpen=o.open,this.form.employees=o.employeeEntities.map(function(e){return e.employeeId}),this.form.parentWorkPackageId=o.parentWorkPackageId,o.projectId!=o.workPackageId&&(this.isNewProject=!1,this.isWorkPackage=!0),this.loading=!1,e.next=23;break;case 18:e.prev=18,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 23:case"end":return e.stop()}},e,this,[[0,18]])}));return function(){return e.apply(this,arguments)}}(),getEmployees:function(){var e=f()(u.a.mark(function e(){var t,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,t=this.$constants.usersUrl,(this.isWorkPackage||this.currentProjectId!=this.currentWorkPackageId&&0!=this.currentProjectId)&&(t=this.$constants.projectUrl+"/"+this.currentProjectId,this.isNewProject=!1,this.isWorkPackage=!0),e.next=6,this.$axios({method:"GET",url:t,headers:{token:this.token}});case 6:if(r=e.sent,this.loading=!1,0==r.data.code){e.next=11;break}return this.$message.error(r.data.message),e.abrupt("return");case 11:this.isWorkPackage?this.employees=r.data.data.employeeEntities:this.employees=r.data.data.list,e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 19:case"end":return e.stop()}},e,this,[[0,14]])}));return function(){return e.apply(this,arguments)}}(),handleSave:function(){var e=f()(u.a.mark(function e(){var t,r,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,this.loading=!0,t=0;t<this.payRates.length;t++)this.form.personDays[this.payRates[t].name]=this.payRates[t].val;return this.isWorkPackage||(this.form.workPackageId=this.form.projectId),r=this.$constants.projectUrl,this.isCreateForm||0==this.currentProjectId||(r+="/"+this.currentProjectId+"/"+this.currentWorkPackageId),!this.isCreateForm&&this.employees.includes(this.form.managerId)||this.form.employees.push(this.form.managerId),null==this.form.assistantId||this.employees.includes(this.form.assistantId)||this.form.employees.push(this.form.assistantId),e.next=10,this.$axios({method:this.isCreateForm?"POST":"PUT",url:r,headers:{token:this.token},data:this.form});case 10:if(a=e.sent,this.loading=!1,0==a.data.code){e.next=15;break}return this.$message.error(a.data.message),e.abrupt("return");case 15:this.$router.push({path:"/dashboard/project"}),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 23:case"end":return e.stop()}},e,this,[[0,18]])}));return function(){return e.apply(this,arguments)}}(),submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.handleSave()})},loadPayRate:function(){var e=f()(u.a.mark(function e(){var t,r,a=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,t=JSON.parse(this.$cookie.get("user")).token,e.prev=2,e.next=5,this.$axios({method:"GET",url:this.$constants.payRateUrl+"?year="+(new Date).getFullYear(),headers:{token:t}});case 5:if(r=e.sent,this.loading=!1,0==r.data.code){e.next=10;break}return this.$message.error(r.data.message),e.abrupt("return");case 10:r.data.data.forEach(function(e){var t={name:e.grade,val:0};a.payRates.push(t)}),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),this.$message.error(e.t0),this.loading=!1,console.log(e.t0);case 19:case"end":return e.stop()}},e,this,[[2,14]])}));return function(){return e.apply(this,arguments)}}()},mounted:function(){var e=this;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$cookie.get("user")){t.next=5;break}return e.$message.error("Token expired"),e.$router.push({name:"Login"}),t.abrupt("return");case 5:return e.token=JSON.parse(e.$cookie.get("user")).token,e.getProjectIdFromUrl(),t.next=9,e.loadPayRate();case 9:e.isCreateForm||e.getCurrentProject(),e.getEmployees();case 11:case"end":return t.stop()}},t,e)}))()}},Y={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-breadcrumb",{staticStyle:{"margin-bottom":"20px"},attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/project"}}},[e._v("Project")]),e._v(" "),e.isNewProject?r("el-breadcrumb-item",[e._v("New Project")]):!1===e.isNewProject?r("el-breadcrumb-item",[e._v(e._s(e.isWorkPackage?"Work Package Details":"Project Details"))]):e._e()],1),e._v(" "),r("el-form",{ref:"ruleForm",attrs:{"label-width":"20vw",model:e.form,rules:e.rules,"hide-required-asterisk":!0}},[!1===e.isWorkPackage?r("el-form-item",{attrs:{label:"Project Name",prop:"projectId"}},[r("el-input",{model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}})],1):e.isWorkPackage?r("el-form-item",{attrs:{label:"Work Package Name",prop:"workPackageId"}},[r("el-input",{model:{value:e.form.workPackageId,callback:function(t){e.$set(e.form,"workPackageId",t)},expression:"form.workPackageId"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:e.projectManagerLabel,prop:"projectManager"}},[r("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.form.managerId,callback:function(t){e.$set(e.form,"managerId",t)},expression:"form.managerId"}},e._l(e.employees,function(t){return r("el-option",{key:t.employeeId,attrs:{label:e.employeesLabel(t),value:t.employeeId}})}),1)],1),e._v(" "),!1===e.isWorkPackage?r("el-form-item",{attrs:{label:"Project Assistant",prop:"projectAssistant"}},[r("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.form.assistantId,callback:function(t){e.$set(e.form,"assistantId",t)},expression:"form.assistantId"}},e._l(e.employees,function(t){return r("el-option",{key:t.employeeId,attrs:{label:e.employeesLabel(t),value:t.employeeId}})}),1)],1):e._e(),e._v(" "),!1===e.isNewProject&&!1===e.isWorkPackage?r("el-form-item",{attrs:{label:"Status",prop:"status"}},[r("el-select",{attrs:{filterable:""},model:{value:e.form.isOpen,callback:function(t){e.$set(e.form,"isOpen",t)},expression:"form.isOpen"}},e._l(e.statusOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),r("el-divider",[e._v("Cost (Est) in Person Day")]),e._v(" "),e._l(e.payRates,function(t,a){return r("el-form-item",{key:a,attrs:{label:t.name,prop:"",item:t}},[r("el-input-number",{attrs:{precision:1,step:.1},model:{value:t.val,callback:function(r){e.$set(t,"val",r)},expression:"item.val"}})],1)}),e._v(" "),e.isNewProject?r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Create\n    ")]):!1===e.isNewProject?r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(e._s(e.isWorkPackage?"Create":"Save")+"\n    ")]):e._e()],2)],1)},staticRenderFns:[]};var B=r("VU/8")(J,Y,!1,function(e){r("rt4f")},"data-v-6c0fc346",null).exports,K={data:function(){var e=this;return{loading:!1,user:null,token:null,ruleForm:{pass:"",checkPass:""},rules:{pass:[{validator:function(t,r,a){""===r?a(new Error("Please input the password")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),a())},trigger:"blur"}],checkPass:[{validator:function(t,r,a){""===r?a(new Error("Please input the password again")):r!==e.ruleForm.pass?a(new Error("Two inputs don't match!")):a()},trigger:"blur"}],oldPass:[{required:!0,message:"Old password is required",trigger:"blur"}]}}},methods:{handleSubmit:function(){var e=this;return f()(u.a.mark(function t(){var r,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,r={oldPassword:e.ruleForm.oldPass,newPassword:e.ruleForm.pass},t.next=5,e.$axios({method:"PUT",url:e.$constants.usersUrl+"/password/"+e.user.employeeId,headers:{token:e.token},data:r});case 5:if(a=t.sent,e.loading=!1,0==a.data.code){t.next=10;break}return e.$message.error(a.data.message),t.abrupt("return");case 10:e.resetForm("ruleForm"),e.$message.success("Your password has been updated"),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(0),e.$message.error(t.t0),console.log(t.t0),e.loading=!1;case 19:case"end":return t.stop()}},t,e,[[0,14]])}))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.handleSubmit()})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){var e=this.$cookie.get("user");if(!e)return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.user=JSON.parse(e),this.token=this.user.token}},X={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-breadcrumb",{staticStyle:{"margin-bottom":"20px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/changepw"}}},[e._v("Profile")]),e._v(" "),r("el-breadcrumb-item",[e._v("Change Password")])],1),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"120px","hide-required-asterisk":!0}},[r("el-form-item",{attrs:{label:"Old Password",prop:"oldPass"}},[r("el-input",{attrs:{autocomplete:"off",type:"password"},model:{value:e.ruleForm.oldPass,callback:function(t){e.$set(e.ruleForm,"oldPass",e._n(t))},expression:"ruleForm.oldPass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Password",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Confirm",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Submit")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("Reset")])],1)],1)],1)},staticRenderFns:[]},Q=r("VU/8")(K,X,!1,null,null,null).exports,Z={name:"AllReports",data:function(){return{dialogTitleText:"",loading:!1,allProjectData:[],dialogData:[],dialogDataCopy:[],dialogReportDateSelect:null,dialogProjecId:null,pagination:{currentPage:1,currentSize:20,sizes:[20,40,60,80,100],total:0},userInfo:null,dialogVisible:!1}},watch:{},mounted:function(){var e=this.$cookie.get("user");if(!e)return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.userInfo=JSON.parse(e),this.getAllProject()},methods:{getAllProject:function(){var e=f()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios({method:"GET",url:"api/projectpackage",headers:{token:this.userInfo.token},data:{employeeId:this.userInfo.employeeId,page:this.pagination.currentPage,size:this.pagination.currentSize}});case 4:if(0==(t=e.sent).data.code){e.next=8;break}return this.$message.error(t.data.message),e.abrupt("return");case 8:this.allProjectData=t.data.data,this.loading=!1,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 17:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),viewReport:function(){var e=f()(u.a.mark(function e(t,r){var a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.dialogVisible=!0,this.loading=!0,a="",e.t0=parseInt(r),e.next=1===e.t0?6:2===e.t0?9:12;break;case 6:return this.dialogTitleText="WeeklyReport",a="api/report/weekly?projectId=",e.abrupt("break",13);case 9:return this.dialogTitleText="MonthlyReport",a="api/report/monthly?projectId=",e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:return e.prev=13,this.loading=!0,this.dialogProjecId=t.projectId,e.next=18,this.$axios({method:"GET",url:a+t.projectId,headers:{token:this.userInfo.token}});case 18:if(0==(o=e.sent).data.code){e.next=23;break}return this.$message.error(o.data.message),this.dialogVisible=!1,e.abrupt("return");case 23:e.t1=parseInt(r),e.next=1===e.t1?26:2===e.t1?29:32;break;case 26:case 29:return this.dialogData=this.disposeData(o.data.data.reports),this.dialogDataCopy=this.disposeData(o.data.data.reports),e.abrupt("break",33);case 32:return e.abrupt("break",33);case 33:this.loading=!1,e.next=42;break;case 36:e.prev=36,e.t2=e.catch(13),this.$message.error(e.t2),console.log(e.t2),this.dialogVisible=!1,this.loading=!1;case 42:case"end":return e.stop()}},e,this,[[13,36]])}));return function(t,r){return e.apply(this,arguments)}}(),selectDateChange:function(){var e=f()(u.a.mark(function e(t){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.dialogReportDateSelect){e.next=4;break}this.dialogData=this.dialogDataCopy,e.next=13;break;case 4:r=0;case 5:if(!(r<this.dialogDataCopy.length)){e.next=12;break}if(this.dialogReportDateSelect!=this.dialogDataCopy[r].reportDate){e.next=9;break}return this.dialogData=[{reportDate:this.dialogReportDateSelect}],e.abrupt("return");case 9:r++,e.next=5;break;case 12:this.dialogData=[];case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),viewWeeklyDetail:function(e){switch(this.dialogTitleText){case"WeeklyReport":this.$router.push({name:"WeeklyReport",query:{projectId:this.dialogProjecId,date:e.reportDate}});break;case"MonthlyReport":this.$router.push({name:"MonthlyReports",query:{projectId:this.dialogProjecId,date:e.reportDate}})}},handleSizeChange:function(e){this.pagination.currentSize=e,this.pagination.currentPage=1,this.getAllProject()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getAllProject()},handleClose:function(e){e(),this.dialogData=[],this.dialogProjecId=null,this.dialogReportDateSelect=null},disposeData:function(e){var t=[];if(0==e.length)return[];switch(this.dialogTitleText){case"WeeklyReport":for(var r in e)if(Object.hasOwnProperty.call(e,r)){if(0==e[r].length)return[];t.push({reportDate:e[r]})}break;case"MonthlyReport":for(var a in e)if(Object.hasOwnProperty.call(e,a)){if(0==e[a].length)return[];t.push({reportDate:e[a].date})}}return t}}},ee={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-row",[r("el-breadcrumb",{staticStyle:{"margin-bottom":"5px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/reports/all"}}},[e._v("Report Management")]),e._v(" "),r("el-breadcrumb-item",[e._v("All Reports")])],1)],1),e._v(" "),r("el-row",[r("el-col",[r("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.allProjectData,border:""}},[r("el-table-column",{attrs:{prop:"projectId",label:"Project Name"}}),e._v(" "),r("el-table-column",{attrs:{prop:"rate",label:"Weekly Report",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.viewReport(t.row,1)}}},[e._v("View")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"rate",label:"Monthly Report",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.viewReport(t.row,2)}}},[e._v("View")])]}}])})],1)],1)],1),e._v(" "),r("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"center"},attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.sizes,"page-size":e.pagination.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.pagination,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentPage",t)}}}),e._v(" "),r("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.dialogTitleText,visible:e.dialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.loading?e._e():r("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",size:"small",placeholder:"Select Date",align:"right"},on:{change:function(t){return e.selectDateChange()}},model:{value:e.dialogReportDateSelect,callback:function(t){e.dialogReportDateSelect=t},expression:"dialogReportDateSelect"}}),e._v(" "),r("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{height:"300","element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.dialogData,border:""}},[r("el-table-column",{attrs:{prop:"reportDate",label:"Date"}}),e._v(" "),r("el-table-column",{attrs:{prop:"rate",label:"Detail",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.viewWeeklyDetail(t.row)}}},[e._v("View")])]}}])})],1)],1)],1)},staticRenderFns:[]};var te=r("VU/8")(Z,ee,!1,function(e){r("TA1Z")},"data-v-2c4fea8c",null).exports,re={name:"AllReports",data:function(){return{loading:!1,tableData:[],projectId:"",projectName:"",reportDate:"",reportPeriod:""}},watch:{},mounted:function(){var e=this.$cookie.get("user");if(!e)return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.userInfo=JSON.parse(e),this.projectId=this.$route.query.projectId,this.reportDate=this.$route.query.date.toString(),this.projectName=this.projectId,this.getMouthlyReport()},methods:{getMouthlyReport:function(){var e=f()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios({method:"GET",url:"api/report/monthly?date="+this.reportDate+"&projectId="+this.projectId,headers:{token:this.userInfo.token}});case 4:if(0==(t=e.sent).data.code){e.next=8;break}return this.$message.error(t.data.message),e.abrupt("return");case 8:console.log(t.data),this.projectId=t.data.data.projectId,this.reportDate=t.data.data.reportDate,this.reportPeriod=t.data.data.reportPeriod,this.tableData=t.data.data.reports,this.loading=!1,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),this.$message.error(e.t0),this.loading=!1;case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}(),labelHead:function(e,t){var r=t.column;t.index;return e("span",{class:"table-head",style:{width:"100%"}},[r.label])},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(0===e.columnIndex)return t%3==0?{rowspan:3,colspan:1}:{rowspan:0,colspan:0}}}},ae={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-row",{staticStyle:{"margin-bottom":"30px"}},[r("el-breadcrumb",{staticStyle:{"margin-bottom":"5px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/reports/all"}}},[e._v("Report Management")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/reports/all"}}},[e._v("All Reports")]),e._v(" "),r("el-breadcrumb-item",[e._v("Monthly Reports")])],1)],1),e._v(" "),r("el-card",{staticClass:"box-card"},[r("el-row",{staticClass:"title_row",attrs:{gutter:20}},[r("el-col",{staticClass:"title_text",attrs:{span:4}},[e._v(" Project ID: ")]),e._v(" "),r("el-col",{staticClass:"title_info",attrs:{span:8}},[e._v("\n        "+e._s(e.projectId)+"\n      ")]),e._v(" "),r("el-col",{staticClass:"title_text",attrs:{span:4}},[e._v(" Project Name: ")]),e._v(" "),r("el-col",{staticClass:"title_info",attrs:{span:8}},[e._v("\n        "+e._s(e.projectName)+"\n      ")])],1),e._v(" "),r("el-row",{staticClass:"title_row",attrs:{gutter:20}},[r("el-col",{staticClass:"title_text",attrs:{span:4}},[e._v(" Report Date: ")]),e._v(" "),r("el-col",{staticClass:"title_info",attrs:{span:8}},[e._v("\n        "+e._s(e.reportDate)+"\n      ")]),e._v(" "),r("el-col",{staticClass:"title_text",attrs:{span:4}},[e._v(" Report Period: ")]),e._v(" "),r("el-col",{staticClass:"title_info",attrs:{span:8}},[e._v("\n        "+e._s(e.reportPeriod)+"\n      ")])],1)],1),e._v(" "),e._l(e.tableData,function(t,a){return r("el-card",{key:a,staticClass:"box-card"},[r("el-descriptions",{staticClass:"margin-top",attrs:{column:2,border:""}},[r("el-descriptions-item",[r("template",{slot:"label"},[r("i",{staticClass:"el-icon-user"}),e._v("\n          Work Package\n        ")]),e._v("\n        "+e._s(t.WorkPackageName)+"\n      ")],2),e._v(" "),r("el-descriptions-item",[r("template",{slot:"label"},[r("i",{staticClass:"el-icon-mobile-phone"}),e._v("\n          Completion\n        ")]),e._v("\n        "+e._s(t.Completion)+"\n      ")],2),e._v(" "),r("el-descriptions-item",[r("template",{slot:"label"},[r("i",{staticClass:"el-icon-location-outline"}),e._v("\n          Comment\n        ")]),e._v(" "),r("span",{domProps:{innerHTML:e._s(t.Comments)}})],2)],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Rows,border:""}},[r("el-table-column",{attrs:{prop:"Name",label:"Name"}}),e._v(" "),r("el-table-column",{attrs:{prop:"BCWS",label:"BCWS"}}),e._v(" "),r("el-table-column",{attrs:{prop:"EngPlanned",label:"EngPlanned"}}),e._v(" "),r("el-table-column",{attrs:{prop:"ACWP",label:"ACWP"}}),e._v(" "),r("el-table-column",{attrs:{prop:"EAC",label:"EAC"}}),e._v(" "),r("el-table-column",{attrs:{prop:"Variance",label:"Variance"}})],1)],1)})],2)},staticRenderFns:[]};var oe=r("VU/8")(re,ae,!1,function(e){r("XzUK")},"data-v-3aa9b744",null).exports,se={name:"ViewTimesheet",data:function(){return{user:null,token:null,loading:!0,isApproveMode:!1,approverView:!1,rows:[],form:{isApproved:"",flexTime:0,overTime:0},totalHours:0,week:(new Date).toISOString().slice(0,10),employeeId:null,pickerOptions:{firstDayOfWeek:1}}},methods:{loadData:function(){var e=this;return f()(u.a.mark(function t(){var r,a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,e.employeeId=e.$route.params.employeeId,e.week=e.$route.params.endDate,t.next=6,e.$axios({method:"GET",url:e.$constants.timesheetUrl+"?employeeId="+e.employeeId+"&endDate="+e.week,headers:{token:e.token}});case 6:if(r=t.sent,e.loading=!1,0==r.data.code){t.next=11;break}return e.$message.error(r.data.message),t.abrupt("return");case 11:(a=r.data.data).length>0&&(e.form.isApproved=a[0].isApproved,e.form.flexTime=a[0].flexTimeUsed,e.form.overTime=a[0].overtime,e.form.employeeId=a[0].employeeId,e.totalHours=a[0].totalHours,"submitted"==e.form.isApproved&&"Administrator"==e.user.role&&e.approverView?e.isApproveMode=!0:"submitted"==e.form.isApproved&&a[0].approverId!==e.user.employeeId||"approved"==e.form.isApproved||"unapproved"==e.form.isApproved?e.isApproveMode=!1:e.isApproveMode=!0),a.length>0&&a[0].timesheetrows.length>0&&(e.rows=a[0].timesheetrows),t.next=21;break;case 16:t.prev=16,t.t0=t.catch(0),e.$message.error(t.t0),console.log(t.t0),e.loading=!1;case 21:case"end":return t.stop()}},t,e,[[0,16]])}))()},handleSubmit:function(){var e=f()(u.a.mark(function e(t){var r,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,r=t?{isApproved:"approved"}:{isApproved:"unapproved"},e.next=5,this.$axios({method:"PUT",url:this.$constants.timesheetUrl+"/"+this.form.employeeId+"/"+this.week,headers:{token:this.token},data:r});case 5:if(a=e.sent,this.loading=!1,0==a.data.code){e.next=10;break}return this.$message.error(a.data.message),e.abrupt("return");case 10:this.$router.push({path:"/dashboard/timesheetapprove"}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 18:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}()},mounted:function(){var e=this.$cookie.get("user");if(this.approverView=1==this.$route.query.approverView,!e)return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.user=JSON.parse(e),this.token=this.user.token,this.loadData()}},ne={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-breadcrumb",{staticStyle:{"margin-bottom":"5px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:e.approverView?"/dashboard/timesheetapprove":"/dashboard/mytimesheet"}}},[e._v("Timesheet")]),e._v(" "),r("el-breadcrumb-item",[e._v("View Timesheet")])],1),e._v(" "),r("el-row",{staticClass:"title_row",staticStyle:{"margin-top":"25px"},attrs:{gutter:20,align:"middle"}},[r("el-col",{staticClass:"title_text",attrs:{span:4}},[e._v(" Status: ")]),e._v(" "),r("el-col",{staticClass:"title_info",attrs:{span:8}},[e._v("\n      "+e._s(e.form.isApproved)+"\n    ")]),e._v(" "),r("el-col",{staticClass:"title_text",attrs:{span:4}},[e._v(" Week End: ")]),e._v(" "),r("el-col",{staticClass:"title_info",attrs:{span:8}},[e._v("\n      "+e._s(e.week)+"\n    ")])],1),e._v(" "),r("el-row",{staticStyle:{"margin-top":"15px"}},[r("el-form",{attrs:{"label-width":"10vw",model:e.form}},[r("el-table",{attrs:{data:e.rows,border:""}},[r("el-table-column",{attrs:{prop:"projectId",label:"Project"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.projectId))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"workPackageId",label:"WP"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.workPackageId))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"mon",label:"Mon"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.mon))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"tue",label:"Tue"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.tue))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"wed",label:"Wed"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.wed))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"thu",label:"Thu"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.thu))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"fri",label:"Fri"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.fri))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"sat",label:"Sat"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.sat))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"sun",label:"Sun"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.sun))])]}}])})],1),e._v(" "),r("el-row",{staticStyle:{"margin-top":"15px"}},[r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"Total Hours:",prop:"flexTime",size:"small"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.totalHours,callback:function(t){e.totalHours=t},expression:"totalHours"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Over Time:",prop:"overTime",size:"small"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.overTime,callback:function(t){e.$set(e.form,"overTime",t)},expression:"form.overTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Flex Time:",prop:"flexTime",size:"small"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.flexTime,callback:function(t){e.$set(e.form,"flexTime",t)},expression:"form.flexTime"}})],1)],1)],1),e._v(" "),e.isApproveMode?r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit(!0)}}},[e._v("\n          Approve\n        ")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit(!1)}}},[e._v("\n          Reject\n        ")])],1):e._e()],1)],1)],1)},staticRenderFns:[]};var ie=r("VU/8")(se,ne,!1,function(e){r("2XjV")},"data-v-0b123eb6",null).exports,le={name:"AllReports",data:function(){return{loading:!1,pageData:[],projectId:"",reportDate:"",reportPeriod:""}},watch:{},mounted:function(){var e=this.$cookie.get("user");if(!e)return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.userInfo=JSON.parse(e),this.projectId=this.$route.query.projectId,this.reportDate=this.$route.query.date,this.getWeeklyReport()},methods:{getWeeklyReport:function(){var e=f()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios({method:"GET",url:"api/report/weekly?date="+this.reportDate+"&projectId="+this.projectId,headers:{token:this.userInfo.token}});case 4:if(0==(t=e.sent).data.code){e.next=8;break}return this.$message.error(t.data.message),e.abrupt("return");case 8:this.projectId=t.data.data.projectId,this.reportDate=t.data.data.reportDate,this.reportPeriod=t.data.data.reportPeriod,console.log(t.data.data),this.pageData=this.disposeData(t.data.data.reports),this.loading=!1,e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),this.$message.error(e.t0),console.log(e.t0),this.loading=!1;case 21:case"end":return e.stop()}},e,this,[[0,16]])}));return function(){return e.apply(this,arguments)}}(),labelHead:function(e,t){var r=t.column;t.index;return e("span",{class:"table-head",style:{width:"100%"}},[r.label])},objectSpanMethod:function(e){var t=e.row,r=e.column,a=e.rowIndex;e.columnIndex;if("Planed Hours"===r.label)return a%t.rowSpan==0?{rowspan:t.rowSpan,colspan:1}:{rowspan:0,colspan:0}},disposeData:function(e){var t=[],r={WPName:"",WPID:"",header:[],detail:[],Planned:0},a={EmployeeId:"",WeekSpent:[],thisWeekSpent:0,Planned:0,total:0,rowSpan:0,colSpan:0,tableIndex:0};if(0==e.length)return[];for(var o in e){if(Object.hasOwnProperty.call(e,o))for(var s=0;s<e[o].length;s++)if(0==s){r.WPName=o,r.WPID=o;for(var n=0;n<e[o][s].length;n++)-1!=e[o][s][n].indexOf("-")&&r.header.push(e[o][s][n])}else{for(var i=0;i<e[o][s].length;i++)0==i?a.EmployeeId=e[o][s][i]:-1!=e[o][0][i].indexOf("-")?""==e[o][s][i]?a.WeekSpent.push({spent:0}):a.WeekSpent.push({spent:parseFloat(e[o][s][i])}):"Total"==e[o][0][i]?""==e[o][s][i]?a.total=0:a.total=parseFloat(e[o][s][i]):"Planned Hours"==e[o][0][i]&&(""==e[o][s][i]?(a.Planned=0,r.Planned+=0):(a.Planned=parseFloat(e[o][s][i]),r.Planned+=parseFloat(e[o][s][i])));a.thisWeekSpent=a.WeekSpent[a.WeekSpent.length-1].spent,a.rowSpan=e[o].length-1,a.colSpan=e[o][0].length,a.tableIndex=s-1,r.detail.push(a),a={EmployeeId:"",WeekSpent:[],thisWeekSpent:0,Planned:0,total:0,rowSpan:0,colSpan:0,tableIndex:0}}t.push(r),r={WPName:"",WPID:"",detail:[],header:[],Planned:0}}return t}}},ce={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-row",{staticStyle:{"margin-bottom":"30px"}},[r("el-breadcrumb",{staticStyle:{"margin-bottom":"5px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/reports/all"}}},[e._v("Report Management")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/reports/all"}}},[e._v("All Reports")]),e._v(" "),r("el-breadcrumb-item",[e._v("Weekly Reports")])],1)],1),e._v(" "),r("el-card",{staticClass:"box-card"},[r("el-row",{staticClass:"title_row",attrs:{gutter:20}},[r("el-col",{staticClass:"title_text",attrs:{span:4}},[e._v("Project ID:")]),e._v(" "),r("el-col",{staticClass:"title_info",attrs:{span:8}},[e._v("\n        "+e._s(e.projectId)+"\n      ")]),e._v(" "),r("el-col",{staticClass:"title_text",attrs:{span:4}},[e._v("Project Name:")]),e._v(" "),r("el-col",{staticClass:"title_info",attrs:{span:8}},[e._v("\n        "+e._s(e.projectId)+"\n      ")])],1),e._v(" "),r("el-row",{staticClass:"title_row",attrs:{gutter:20}},[r("el-col",{staticClass:"title_text",attrs:{span:4}},[e._v("Report Date:")]),e._v(" "),r("el-col",{staticClass:"title_info",attrs:{span:8}},[e._v("\n        "+e._s(e.reportDate)+"\n      ")]),e._v(" "),r("el-col",{staticClass:"title_text",attrs:{span:4}},[e._v("Report Period:")]),e._v(" "),r("el-col",{staticClass:"title_info",attrs:{span:8}},[e._v("\n        "+e._s(e.reportPeriod)+"\n      ")])],1)],1),e._v(" "),e._l(e.pageData,function(t,a){return r("el-card",{key:a,staticClass:"box-card"},[r("el-descriptions",{staticClass:"margin-top",attrs:{column:2,border:""}},[r("el-descriptions-item",[r("template",{slot:"label"},[r("i",{staticClass:"el-icon-user"}),e._v("\n          Work Package ID\n        ")]),e._v("\n        "+e._s(t.WPName)+"\n      ")],2),e._v(" "),r("el-descriptions-item",[r("template",{slot:"label"},[r("i",{staticClass:"el-icon-user"}),e._v("\n          Work Package Name\n        ")]),e._v("\n        "+e._s(t.WPName)+"\n      ")],2)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"span-method":e.objectSpanMethod,"render-header":e.labelHead,"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:t.detail,border:""}},[r("el-table-column",{attrs:{prop:"EmployeeId",label:"Name",width:"100"}}),e._v(" "),e._l(t.header,function(t,a){return r("el-table-column",{key:a,attrs:{label:t,align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.WeekSpent[a].spent))])]}}],null,!0)})}),e._v(" "),r("el-table-column",{attrs:{prop:"thisWeekSpent",label:"This Week Total Hours"}}),e._v(" "),r("el-table-column",{attrs:{prop:"total",label:" Total Spent Hours"}}),e._v(" "),r("el-table-column",{attrs:{prop:"Planned",label:"Planed Hours",width:"120",align:"center",fixed:"right"}},[[r("span",{staticStyle:{"text-align":"center"}},[e._v(e._s(t.Planned))])]],2)],2)],1)})],2)},staticRenderFns:[]};var de=r("VU/8")(le,ce,!1,function(e){r("I2C1")},"data-v-338bb92a",null).exports,ue={name:"AllReports",data:function(){return{loading:!1,tableData:[],selectProjectName:[],selectWPName:[],projectInfo:[],payRatesEst:[],payRatesRe:[],form:{projectId:"",workPackageId:"",reportPeriodFrom:"",comments:"",workAccomplished:"",workPlanned:"",problemsFaced:"",problemsAnticipated:"",etc:{},engineerPlanned:{}},dialogVisible:!1,dialogTitleText:"Edit Report",dialogState:!1}},watch:{},mounted:function(){var e=this.$cookie.get("user");if(!e)return this.$message.error("Token expired"),void this.$router.push({name:"Login"});this.userInfo=JSON.parse(e),this.getMonthlyList(),this.getAllproject(),this.loadPayRate();var t=new Date;this.form.reportPeriodFrom=t.toLocaleDateString().split("/").join("-")},methods:{getAllproject:function(){var e=f()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios({method:"GET",url:"api/projectpackage",headers:{token:this.userInfo.token}});case 4:if(0==(t=e.sent).data.code){e.next=8;break}return this.$message.error(t.data.message),e.abrupt("return");case 8:this.disposeData(t.data.data),this.disposeData2(t.data.data),this.loading=!1,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),this.$message.error(e.t0),this.loading=!1;case 17:case"end":return e.stop()}},e,this,[[0,13]])}));return function(){return e.apply(this,arguments)}}(),getMonthlyList:function(){var e=f()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$axios({method:"GET",url:"api/report/RE",headers:{token:this.userInfo.token}});case 4:if(0==(t=e.sent).data.code){e.next=8;break}return this.$message.error(t.data.message),e.abrupt("return");case 8:this.tableData=t.data.data.reports,this.loading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),this.$message.error(e.t0),this.loading=!1;case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),disposeData:function(e){for(var t={projectName:"",wpName:"",reportDate:""},r=0;r<e.length;r++)t.projectName=e[r].projectId,t.wpName=e[r].workPackageId,this.projectInfo.push(t),t={projectName:"",wpName:""},e[r].childWorkPackages.length>0&&this.disposeData(e[r].childWorkPackages)},disposeData2:function(e){for(var t=0;t<e.length;t++)this.selectProjectName.push(e[t].projectId)},viewMonthlyReport:function(){var e=f()(u.a.mark(function e(t){var r,a,o,s,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,this.dialogTitleText="View Report",e.prev=2,e.next=5,this.$axios({method:"GET",url:"api/report/RE/"+t.projectId+"/"+t.workPackageId,params:{date:t.date},headers:{token:this.userInfo.token}});case 5:if(r=e.sent,this.loading=!1,0==r.data.code){e.next=10;break}return this.$message.error(r.data.message),e.abrupt("return");case 10:for(a in this.form.projectId=r.data.data.projectId,this.form.workPackageId=r.data.data.workPackageId,this.form.reportPeriodFrom=r.data.data.reportDate,this.form.comments=r.data.data.comment,this.form.workAccomplished=r.data.data.workAccomplished,this.form.workPlanned=r.data.data.workPlanned,this.form.problemsFaced=r.data.data.problemFaced,this.form.problemsAnticipated=r.data.data.problemAnticipated,this.payRatesEst=[],r.data.data.etc)o={name:a,val:r.data.data.etc[a]},this.payRatesEst.push(o);for(s in this.payRatesRe=[],r.data.data.engineerPlanned)n={name:s,val:r.data.data.engineerPlanned[s]},this.payRatesRe.push(n);this.dialogVisible=!0,this.dialogState=!0,e.next=30;break;case 26:e.prev=26,e.t0=e.catch(2),this.loading=!1,this.$message.error(e.t0);case 30:case"end":return e.stop()}},e,this,[[2,26]])}));return function(t){return e.apply(this,arguments)}}(),handleClose:function(e){e(),this.form={projectId:"",workPackageId:"",reportPeriodFrom:(new Date).myDate.toLocaleDateString().split("/").join("-"),comments:"",workAccomplished:"",workPlanned:"",problemsFaced:"",problemsAnticipated:""}},addReport:function(){this.dialogVisible=!0,this.dialogState=!1,this.dialogTitleText="Add Report"},submitForm:function(){var e=f()(u.a.mark(function e(){var t,r,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<this.payRatesEst.length;t++)this.form.etc[this.payRatesEst[t].name]=this.payRatesEst[t].val;for(r=0;r<this.payRatesRe.length;r++)this.form.engineerPlanned[this.payRatesRe[r].name]=this.payRatesRe[r].val;return e.prev=2,e.next=5,this.$axios({method:"POST",url:"api/report/RE",headers:{token:this.userInfo.token},data:this.form});case 5:if(0==(a=e.sent).data.code){e.next=11;break}return this.$message.error(a.data.message),e.abrupt("return");case 11:this.$message.success(a.data.data),this.getMonthlyList(),this.dialogVisible=!1;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),this.$message.error(e.t0),console.log(e.t0);case 20:case"end":return e.stop()}},e,this,[[2,16]])}));return function(){return e.apply(this,arguments)}}(),changeProjectName:function(){this.selectWPName=[],this.form.workPackageId="";for(var e=0;e<this.projectInfo.length;e++)this.form.projectId==this.projectInfo[e].projectName&&this.selectWPName.push(this.projectInfo[e].wpName)},loadPayRate:function(){var e=f()(u.a.mark(function e(){var t,r,a=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,t=JSON.parse(this.$cookie.get("user")).token,e.prev=2,e.next=5,this.$axios({method:"GET",url:this.$constants.payRateUrl+"?year="+(new Date).getFullYear(),headers:{token:t}});case 5:if(r=e.sent,this.loading=!1,0==r.data.code){e.next=10;break}return this.$message.error(r.data.message),e.abrupt("return");case 10:r.data.data.forEach(function(e){var t={name:e.grade,val:0};a.payRatesEst.push(t)}),this.payRatesEst.forEach(function(e){var t={name:e.name,val:e.val};a.payRatesRe.push(t)}),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),this.$message.error(e.t0),this.loading=!1,console.log(e.t0);case 20:case"end":return e.stop()}},e,this,[[2,15]])}));return function(){return e.apply(this,arguments)}}()}},pe={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-row",[r("el-breadcrumb",{staticStyle:{"margin-bottom":"5px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/dashboard/reports/MonthlyList"}}},[e._v("Report Management")]),e._v(" "),r("el-breadcrumb-item",[e._v("Monthly Reports")])],1)],1),e._v(" "),r("el-row",{staticStyle:{"margin-bottom":"20px","text-align":"right"}},[r("el-button",{staticClass:"btn",attrs:{type:"primary",size:"middle"},on:{click:function(t){return e.addReport()}}},[e._v("New Report")])],1),e._v(" "),r("el-row",[r("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"projectId",label:"Project"}}),e._v(" "),r("el-table-column",{attrs:{prop:"workPackageId",label:"Work Package"}}),e._v(" "),r("el-table-column",{attrs:{prop:"date",label:"Report Date"}}),e._v(" "),r("el-table-column",{attrs:{label:"Action",fixed:"right",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.viewMonthlyReport(t.row)}}},[e._v("View")])]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:e.dialogTitleText,visible:e.dialogVisible,width:"800px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-row",{staticClass:"form"},[r("el-row",{staticClass:"form_row"},[r("el-col",{staticClass:"form_title",attrs:{span:6}},[e._v("Project Name")]),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-select",{attrs:{placeholder:"Select Project",size:"small",disabled:e.dialogState},on:{change:e.changeProjectName},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.selectProjectName,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),r("el-col",{staticClass:"form_title",attrs:{span:5}},[e._v(" WP Name")]),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-select",{attrs:{placeholder:"Select workPackage",size:"small",disabled:0==e.selectWPName.length||1==e.dialogState},model:{value:e.form.workPackageId,callback:function(t){e.$set(e.form,"workPackageId",t)},expression:"form.workPackageId"}},e._l(e.selectWPName,function(e,t){return r("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),r("el-row",{staticClass:"form_row"},[r("el-col",{staticClass:"form_title",attrs:{span:6}},[e._v("Report Date")]),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-date-picker",{attrs:{type:"date",placeholder:"select Date",size:"small",disabled:""},model:{value:e.form.reportPeriodFrom,callback:function(t){e.$set(e.form,"reportPeriodFrom",t)},expression:"form.reportPeriodFrom"}})],1)],1),e._v(" "),r("el-row",{staticClass:"form_row"},[r("el-col",{staticClass:"form_title",attrs:{span:6}},[e._v("Comments")]),e._v(" "),r("el-col",{attrs:{span:17}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"",disabled:e.dialogState},model:{value:e.form.comments,callback:function(t){e.$set(e.form,"comments",t)},expression:"form.comments"}})],1)],1),e._v(" "),r("el-row",{staticClass:"form_row"},[r("el-col",{staticClass:"form_title",attrs:{span:6}},[e._v("Work Accomplished"),r("br"),e._v("This Period")]),e._v(" "),r("el-col",{attrs:{span:17}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"",disabled:e.dialogState},model:{value:e.form.workAccomplished,callback:function(t){e.$set(e.form,"workAccomplished",t)},expression:"form.workAccomplished"}})],1)],1),e._v(" "),r("el-row",{staticClass:"form_row"},[r("el-col",{staticClass:"form_title",attrs:{span:6}},[e._v("Work Planned"),r("br"),e._v("Next Period")]),e._v(" "),r("el-col",{attrs:{span:17}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"",disabled:e.dialogState},model:{value:e.form.workPlanned,callback:function(t){e.$set(e.form,"workPlanned",t)},expression:"form.workPlanned"}})],1)],1),e._v(" "),r("el-row",{staticClass:"form_row"},[r("el-col",{staticClass:"form_title",attrs:{span:6}},[e._v("Problems This Period")]),e._v(" "),r("el-col",{attrs:{span:17}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"",disabled:e.dialogState},model:{value:e.form.problemsFaced,callback:function(t){e.$set(e.form,"problemsFaced",t)},expression:"form.problemsFaced"}})],1)],1),e._v(" "),r("el-row",{staticClass:"form_row"},[r("el-col",{staticClass:"form_title",attrs:{span:6}},[e._v("Problems Anticipated")]),e._v(" "),r("el-col",{attrs:{span:17}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"",disabled:e.dialogState},model:{value:e.form.problemsAnticipated,callback:function(t){e.$set(e.form,"problemsAnticipated",t)},expression:"form.problemsAnticipated"}})],1)],1),e._v(" "),r("el-divider",[e._v("Estimate")]),e._v(" "),e._l(e.payRatesEst,function(t,a){return r("el-row",{key:"EST"+a,staticClass:"form_row",attrs:{item:t}},[r("el-col",{staticClass:"form_title",attrs:{span:6}},[e._v(e._s(t.name))]),e._v(" "),r("el-col",{attrs:{span:17}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:1,step:.1,disabled:e.dialogState},model:{value:t.val,callback:function(r){e.$set(t,"val",r)},expression:"item.val"}})],1)],1)}),e._v(" "),r("el-divider",[e._v("Engineer Planned")]),e._v(" "),e._l(e.payRatesRe,function(t,a){return r("el-row",{key:a,staticClass:"form_row",attrs:{item:t}},[r("el-col",{staticClass:"form_title",attrs:{span:6}},[e._v(e._s(t.name))]),e._v(" "),r("el-col",{attrs:{span:17}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{precision:1,step:.1,disabled:e.dialogState},model:{value:t.val,callback:function(r){e.$set(t,"val",r)},expression:"item.val"}})],1)],1)})],2),e._v(" "),e.dialogState?e._e():r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancle")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("OK")])],1)],1)],1)},staticRenderFns:[]};var me=r("VU/8")(ue,pe,!1,function(e){r("Mw84")},"data-v-27de9c00",null).exports;a.default.use(c.a);var he=new c.a({routes:[{path:"/",name:"Login",component:b},{path:"/dashboard",name:"DashBoard",component:_,redirect:{name:"Welcome"},children:[{name:"Welcome",path:"welcome",component:H},{name:"Project",path:"project",component:function(){return r.e(0).then(r.bind(null,"/GvF"))}},{name:"EditProject",path:"editProject/:id",component:B},{name:"EmployeeList",path:"employeeList",component:P},{name:"EditPayRate",path:"editPayRate",component:R},{name:"EditEmployee",path:"editEmployee/:id",component:S},{name:"TimesheetApprove",path:"timesheetApprove",component:A},{name:"MyTimesheet",path:"myTimesheet",component:F},{name:"AddTimesheet",path:"addTimesheet/:id",component:U},{name:"ViewTimesheet",path:"viewTimesheet/:employeeId/:endDate",component:ie},{name:"ChangePW",path:"changepw",component:Q},{name:"AllReport",path:"reports/all",component:te},{name:"WeeklyReport",path:"reports/weekly",component:de},{name:"MonthlyList",path:"reports/MonthlyList",component:me},{name:"MonthlyReports",path:"reports/monthlyReports",component:oe}]}]}),fe=r("mtWM"),ge=r.n(fe),ve=r("K/Lq"),be=r.n(ve),ke={loginUrl:"api/auth/login",usersUrl:"api/user",payRateUrl:"api/paygrade",projectUrl:"api/projectpackage",timesheetUrl:"api/timesheet"},we=r("wUZ8"),_e=r.n(we);r("Dvw3").config(),a.default.config.productionTip=!1,a.default.prototype.$axios=ge.a,a.default.prototype.$constants=ke,a.default.use(be.a),a.default.use(l.a,{locale:_e.a}),new a.default({el:"#app",router:he,components:{App:n},template:"<App/>"}),he.beforeEach(function(e,t,r){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.pageYOffset=0,r()})},QLx0:function(e,t){},TA1Z:function(e,t){},XkLY:function(e,t){},XzUK:function(e,t){},iR9F:function(e,t){},lPeV:function(e,t){},rt4f:function(e,t){},slH1:function(e,t){},tvR6:function(e,t){}},["NHnr"]);